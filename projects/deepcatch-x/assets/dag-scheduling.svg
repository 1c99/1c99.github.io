<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 520" style="background:#1e1e1e">
  <style>
    .box { fill: none; stroke: #888; stroke-width: 1.5; }
    .text { font-family: 'Courier New', monospace; fill: #ccc; font-size: 14px; }
    .text-small { font-family: 'Courier New', monospace; fill: #888; font-size: 11px; }
    .line { stroke: #888; stroke-width: 1.5; fill: none; }
    .arrow { fill: #888; }
  </style>

  <!-- Input DICOM Image -->
  <rect x="275" y="20" width="250" height="40" rx="3" class="box"/>
  <text x="400" y="46" text-anchor="middle" class="text">Input DICOM Image</text>

  <!-- Vertical line from Input -->
  <line x1="400" y1="60" x2="400" y2="85" class="line"/>

  <!-- Horizontal branching line -->
  <line x1="100" y1="85" x2="700" y2="85" class="line"/>

  <!-- Vertical lines down to Level 0 -->
  <line x1="100" y1="85" x2="100" y2="105" class="line"/>
  <line x1="400" y1="85" x2="400" y2="105" class="line"/>
  <line x1="700" y1="85" x2="700" y2="105" class="line"/>

  <!-- Arrows to Level 0 -->
  <polygon points="100,115 95,105 105,105" class="arrow"/>
  <polygon points="400,115 395,105 405,105" class="arrow"/>
  <polygon points="700,115 695,105 705,105" class="arrow"/>

  <!-- Level 0: Lung, Heart, Aorta -->
  <rect x="25" y="120" width="150" height="50" rx="3" class="box"/>
  <text x="100" y="143" text-anchor="middle" class="text">Lung</text>
  <text x="100" y="160" text-anchor="middle" class="text-small">(2048x2048)</text>

  <rect x="325" y="120" width="150" height="50" rx="3" class="box"/>
  <text x="400" y="143" text-anchor="middle" class="text">Heart</text>
  <text x="400" y="160" text-anchor="middle" class="text-small">(512x512)</text>

  <rect x="625" y="120" width="150" height="50" rx="3" class="box"/>
  <text x="700" y="143" text-anchor="middle" class="text">Aorta</text>
  <text x="700" y="160" text-anchor="middle" class="text-small">(512x512)</text>

  <!-- Lines from Lung to COVID/Vessel -->
  <line x1="100" y1="170" x2="100" y2="195" class="line"/>
  <line x1="60" y1="195" x2="140" y2="195" class="line"/>
  <line x1="60" y1="195" x2="60" y2="215" class="line"/>
  <line x1="140" y1="195" x2="140" y2="215" class="line"/>
  <polygon points="60,225 55,215 65,215" class="arrow"/>
  <polygon points="140,225 135,215 145,215" class="arrow"/>

  <!-- Line from Heart to CTR -->
  <line x1="400" y1="170" x2="400" y2="225" class="line"/>
  <polygon points="400,235 395,225 405,225" class="arrow"/>

  <!-- Line from Aorta to Diameter -->
  <line x1="700" y1="170" x2="700" y2="225" class="line"/>
  <polygon points="700,235 695,225 705,225" class="arrow"/>

  <!-- Level 1: COVID, Vessel -->
  <rect x="20" y="230" width="80" height="40" rx="3" class="box"/>
  <text x="60" y="255" text-anchor="middle" class="text">COVID</text>

  <rect x="110" y="230" width="80" height="40" rx="3" class="box"/>
  <text x="150" y="255" text-anchor="middle" class="text">Vessel</text>

  <!-- CTR box -->
  <rect x="320" y="240" width="160" height="60" rx="3" class="box"/>
  <text x="400" y="265" text-anchor="middle" class="text">CTR</text>
  <text x="400" y="282" text-anchor="middle" class="text-small">(requires lung+heart)</text>

  <!-- Diameter box -->
  <rect x="625" y="240" width="150" height="40" rx="3" class="box"/>
  <text x="700" y="265" text-anchor="middle" class="text">Diameter</text>

  <!-- Arrow from Diameter to CTR with label -->
  <line x1="625" y1="260" x2="490" y2="260" class="line"/>
  <polygon points="490,260 500,255 500,265" class="arrow"/>
  <text x="557" y="250" text-anchor="middle" class="text-small">lung mask</text>

  <!-- Lines from COVID to TB -->
  <line x1="60" y1="270" x2="60" y2="310" class="line"/>
  <polygon points="60,320 55,310 65,310" class="arrow"/>

  <!-- Lines from Vessel to Peripheral -->
  <line x1="150" y1="270" x2="150" y2="310" class="line"/>
  <polygon points="150,320 145,310 155,310" class="arrow"/>

  <!-- Line from CTR to Volumetry -->
  <line x1="400" y1="300" x2="400" y2="330" class="line"/>
  <polygon points="400,340 395,330 405,330" class="arrow"/>

  <!-- Level 2: TB, Peripheral, Volumetry -->
  <rect x="20" y="325" width="80" height="40" rx="3" class="box"/>
  <text x="60" y="350" text-anchor="middle" class="text">TB</text>

  <rect x="110" y="325" width="80" height="40" rx="3" class="box"/>
  <text x="150" y="342" text-anchor="middle" class="text">Periph-</text>
  <text x="150" y="358" text-anchor="middle" class="text">eral</text>

  <rect x="320" y="345" width="160" height="40" rx="3" class="box"/>
  <text x="400" y="370" text-anchor="middle" class="text">Volumetry</text>

  <!-- Execution Levels Text -->
  <text x="40" y="420" class="text">EXECUTION LEVELS:</text>
  <text x="60" y="445" class="text-small">Level 0: [lung, heart, bone, airway, aorta, t12l1, laa]  ← Independent</text>
  <text x="60" y="467" class="text-small">Level 1: [covid, vessel, tb, bone_supp]                   ← Depend on Level 0</text>
  <text x="60" y="489" class="text-small">Level 2: [ctr, diameter, peripheral, volumetry]           ← Depend on Level 0/1</text>
</svg>
